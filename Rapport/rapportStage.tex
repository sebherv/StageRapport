\documentclass[12pt,a4paper]{report}
\setcounter{secnumdepth}{5} % setting level of numbering (default for "report" is 3).
\usepackage{natbib}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{appendix}
\usepackage{enumitem}
\usepackage{float} 
\usepackage[nottoc, notlof, notlot]{tocbibind}
\usepackage{pdfpages}
\usepackage{gensymb}
\usepackage{lipsum}
\usepackage[colorinlistoftodos,textwidth=3.7cm]{todonotes}
\author{Sébastien Hervieu}
\begin{document}
	
\newcommand{\todoRediger}[1]{\todo[color=red,inline]{REDIGER #1}}
\newcommand{\todoARevoir}[1]{\todo[color=red,inline]{A REVOIR #1}}
\newcommand{\todoCompleter}[1]{\todo[inline]{COMPLETER #1}}
\newcommand{\todoAmeliorer}[1]{\todo{AMELIORER: #1}}
\newcommand{\todoMiseEnForme}[1]{\todo[color=green,inline]{MISE EN FORME: #1}}
\newcommand{\todoCheck}[1]{\todo[color=cyan,fancyline]{VERIFIER #1}}
\newcommand{\todoObjectif}{\todo[color=yellow,inline,size=\Large]}

\begin{titlepage}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % Defines a new command for the horizontal lines, change thickness here

\center % Center everything on the page
 
%----------------------------------------------------------------------------------------
%	HEADING SECTIONS
%----------------------------------------------------------------------------------------

\textsc{\LARGE Université de Rennes 1}\\[1cm] 
\textsc{\Large }\\[0.5cm] % Major heading such as course name
\textsc{\large Master 2 Calcul scientifique et modélisation}\\
\textsc{Rapport de Projet de Préstage}\\
%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\HRule \\[0.4cm]
{ \huge \bfseries Etude et développement d’outils mathématiques pour estimer, en temps réel, le tassage et le volume d’un silo de maïs à partir de capteurs embarqués}\\[0.4cm] 
\HRule \\[1.5cm]
 
%----------------------------------------------------------------------------------------
%	AUTHOR SECTION
%----------------------------------------------------------------------------------------

\begin{minipage}{0.4\textwidth}
\begin{flushleft} \large
\emph{Auteur:}\\
Sébastien \textsc{Hervieu}
\end{flushleft}
\end{minipage}
~
\begin{minipage}{0.4\textwidth}

\begin{flushright}
	\emph{Tuteur de Stage:} \\
	Geoffroy \textsc{Etaix}
\end{flushright}

\begin{flushright} \large
	\emph{Tuteur Universitaire:} \\
	Fabrice \textsc{Mahé} 
\end{flushright}

\end{minipage}\\[1cm]

% If you don't want a supervisor, uncomment the two lines below and remove the section above
%\Large \emph{Author:}\\
%John \textsc{Smith}\\[3cm] % Your name

%----------------------------------------------------------------------------------------
%	DATE SECTION
%----------------------------------------------------------------------------------------

{\large \today}\\[1cm] % Date, change the \today to a set date if you want to be precise

%----------------------------------------------------------------------------------------
%	LOGO SECTION
%----------------------------------------------------------------------------------------
\includegraphics[height=3cm]{img/logo-tellusenv.png} \\
\includegraphics[height=3cm]{img/univ.jpeg}\\[1cm] % Include a department/university logo - this will require the graphicx package
 
%----------------------------------------------------------------------------------------

\vfill % Fill the rest of the page with whitespace

\end{titlepage}

\listoftodos


\cleardoublepage% especially in a document where chapters start at right-hand pages
%\phantomsection% for an anchor if you use hyperref

\chapter*{Remerciements}% for the actuall unnumbered heading
\addcontentsline{toc}{chapter}{\numberline{}Remerciements}% if you wish to have a TOC entry
\thispagestyle{empty}% or plain etc.
\markboth{Remerciements}{Remerciements}% relevant depending on page style
% or if it's more than one page


Je tiens à remercier les personnes qui m'ont permis de prés ou de loin à accomplir ce stage et qui m'ont aidé lors de la rédaction de ce rapport.

Tout d'abord, j'adresse mes remerciements à Messieurs \textbf{Fabrice Mahé et Eric Darrigrand} profeseurs de l'Université de Rennes 1, qui m'ont permis de suivre cette formation et qui m'ont accompagné lors de la recherche de stage.

Je tiens à remercier Monsieur \textbf{Geoffroy ETAIX}, qui m'a accordé sa confiance pour le stage et pour etc 
\todoCompleter{remercier Goeffroy}
\todoRediger{Remercier Fongecif}
\todoRediger{Remercier Ingeus}
\todoRediger{Remercier IDApps, Yann, Stéphane, et surtout Laila!}

Enfin, last but not least, je tiens à remercier mon épouse Céline et mes deux filles pour leur encouragments, leurs soutient et leur patience.
\todoCompleter{Céline et les filles}

\todoCompleter{Completer les remerciements}
\todoMiseEnForme{Aérer}

\tableofcontents
\newpage

\chapter{Introduction}
\todoAmeliorer{L'introduction doit-elle être un chapitre ou alors un Abstract?}
\todoRediger{Introduction du context projet: j'ai effectué le stage blabla au sein de l'entreprise bla etc}
	\section{Tellus Environment}
	\todoRediger{Tellus création, mission, activité}
	
	\subsection{Géophysique et cartographie haute-définition}
	Tellus Environmenent est une startup spécialisée dans la cartographie haute définition des sous-sols et des fond-marins. Elle propose à ses clients une offre bout en bout d'acquisition et de traitement des données pour permettre à ses clients d'agir en fonction de ces conclusions.
	\todoAmeliorer{Ce \S $\;$peut servir à l'intro sur Tellus.}
	
	\subsection{Collecte des données géophysique}
	
	\paragraph*{} Tellus Environment met en oeuvre ses propres équipements géoradar et magnetomètre pour l'acquisition de données sur le sous-sol sur des surfaces de quelques mètres-carré à quelque hectares. Elle est aussi en mesure de planifier et coordonner la mise en oeuvre d'équipements plus lourds - LIDAR, géoradar, magnétomètres aéroporté - pour obtenir des données sur des surfaces beaucoup plus importantes, de l'ordre du kilomètre carré.
	
	\missingfigure{Georadar}
	\missingfigure{Magnetomètre}
	\missingfigure{Radargramme}
	
	\paragraph*{} Tellus Environment peut aussi coordonner la mise en oeuvre d'équipements d'acquisition marins - sonar, multibeam, \underline{percuteur} \todoCheck{est-ce le bon terme?} - pour permettre la cartographie des fonds marins et des sous-sols aquatiques, que ce soit en environnement eau douce - rivières, lacs étangs - ou marins. 
	\missingfigure{sonar}
	\missingfigure{sonargramme}
	
	\paragraph*{} Tellus Environment a accès à de nombreuses bases cartographiques pour compléter les données acquises sous sa supervision pour aider à la mise en oeuvre des équipements ainsi qu'à compléter les données acquises en vue de leur traitement.

\subsection{Traitement des données}
\todoRediger{Expertise Tellus Traitement des données}
\todoObjectif{Montrer la pertinance de l'expertise de Tellus pour la cartographie 3D}


Activité: R\&D: développer des composants qui mettent en oeuvre les expertises de TellusEnvironment pour créer des produits innovants, dont les composants seraient de plus réutilisables pour améliorer la productivité des services Géophysique.
Note finale: aller sur le terrain

	\section{Contexte projet}
	\todoRediger{Context Projet}
		\subsection{Symeter V1}
		Symeter V1: rapide rappel
		\todoRediger{SymeterV1}
		
		\subsection{Symeter V2: Objectifs}
		Symeter V2: Objectifs
		Symeter V2: Présentation du plan de projet
- test du simulateur Gazebo pour évaluer son utilité dans le projet Symeter2
- Simulation couverture lidar
- Montage des outils nécessaires au développement simulé du projet symeter
- Mise en place de la localisation: installation et tests
- Mise en place de l'acquisition des relevés.

	\section{Les outils à mettre en oeuvre}
	Cette section énumère les différents capteurs, environnement d'exploitation, outils mathématiques et procédés qui devront être mis en oeuvre pour monter le prototype de Symeter 2.
	
		\subsection{Capteurs}
			Les capteurs à mettre en oeuvre seront un ou plusieurs LIDAR, un ou plusieurs IMU et un ou plusieurs GPS.
		\subsubsection{LIDAR Hyukyo Blabla}
		\todo{Préciser le type exact du Lidar}
		\todo{Décrire le fonctionnement et les fonctionalités générales d'un lidar}
		\todo{Décrire les caratéristiques exactes }
		\missingfigure{Photo du Hukyo}
		\subsection{Environnement de programmation}
		Du fait de son utilisation dans la première version de Symeter, et du fait de ses qualités en terme de modularité, de disponibilité des drivers pour les capteurs et 
		\subsection{Les outils mathématiques}
			\subsubsection{Positionnement en Robotique}
		Positionnement en Robotique: Géometrie projective, Coordonnées Homogènes, Quaternions
			
			\subsubsection{Localisation par fusion de données}
		Filtres de Kalmans
		
			\subsubsection{Traitement des nuages de points}
			
		\subsection{Environnement d'exploitation: ROS}
			\subsubsection{ROS}
			
			\subsubsection{Contraintes de développement}
				Les équipements à mettre en oeuvre sont relativement couteux et leur mise en oeuvre requiert une certaine expertise.
				
				De plus la mise en silo du maïs n'intervient qu'à de courtes périodes au cours de l'année. Il est donc nécessaire de pouvoir mettre en oeuvre le développement du système par le biais de mises en oeuvre alternatives, à savoir la simulation et la mise en oeuvre en grandeur des équipements pour effectuer des tests simples de reconstitution du terrain.
				
				ROS est fourni avec un environnement de simulation robotique très intégré nommé "Gazebo", qui permet de simuler en temps réel le comportement mécanique de modèles de robots. Ce logiciel est donc utilisé pour simuler un environnement de Silo pour tester la localisation, l'acquisition du terrain, la mesure d'un modèle de Silo.
				
				Pour la mise en oeuvre en grandeur, un prototype de l'équipement a été monté sur la camionnette de Tellus Environnement, la "Tellus Car".
				

\chapter{Simulation robotique en utilisant ROS/Gazebo}
	\section{Présentation de ROS}
		\subsection{Architecture de ROS}
			Nodes, services, topics, etc, etc
		\subsection{Gestion des transformations}
		\subsection{Gestions des Capteurs}
	\section{Présentation de Gazebo}
		\subsection{Construction d'un robot virtuel}
		\subsection{Intégration des capteurs}
		
	\section{Contraintes de mise en oeuvre}
		\subsection{Quelques bugs génants}
		\subsection{Simulation mécanique, frottements, adhérence}
		\subsection{Conclusions sur les contraintes}
		Eviter à tout prix que le véhicule entre en dérapage: il ne récupère généralement pas.
		Raisons pour lesquelles le véhicule peut entrer en dérapage:
			- mauvaise configuration des paramètres de frottement des éléments en contact avec le sol.
			- vitesses de rotation différentes des roues: 
				- mauvaise consigne de vitesse sur les roues
				- différence de vitesse entre roue intérieure et roue extérieure lors d'un virage
			- en virage: rayons de virages différent entre roue intérieure et roue extérieure
			
		Conduite en terrain accidenté:
			- Conserver la directivité
			- 4 roues motrices et/ou suspension
		
	\section{Mise en Oeuvre: simulation d'un environnement de tassage de silo}
		\subsection{Montage d'un tracteur simulé}
		Intérêt: simuler l'implantation physique des capteurs avec des dimensions du même ordre de grandeur que les plateformes cibles.
		
		\subsubsection{Description Physique}
			\paragraph{Chassis}
			Le chassis du tracteur à été monté en se basant sur les dimensions générales d'un tracteur de type \textbf{TODO: ICI TYPE DE TRACTEUR} \todo{Ecrire type de tracteur}, en utilisant cependant des formes géométriques simplifiées.
			\newline
			
			Le tracteur est donc composé d'un pavé en guise de chassis, de 4 cylindres allongés en guise d'essieux, et de 4 grands cylindres en guise de roues.
			
			 \missingfigure{Image du tracteur modélisé}
			\paragraph{Actuateurs et Contrôleurs}
			\todo{Rédiger Actuateur et Contrôleurs}
		\subsubsection{Propulsion et Guidage}
			\paragraph{Algorithme}
			
			\todo[inline]{Description géométrique du problème de direction différentielle}
			
			\paragraph{Implémentation sous ROS}
			\todo{Description de l'implémentation sous ROS}
			\missingfigure{Schéma des flux topic qui permet de transformer une commande twist en 4 commandes de velocités.}
			
		
		

\chapter{Mise en place du processus de localisation}

\chapter{Processus d'acquisition des relevés à base de LIDAR}



\begin{appendix}
	\chapter{Positionnement En Robotique}
		\section{Géometrie projective, Coordonnées Homogènes}
		\section{Une autre descriptions des rotations en 3D: Quaternions Unitaires}
		\section{Application: Simulation de couverture d'un faiseau LIDAR orienté vers le sol}
	
	\chapter{Filtres de Kalman}
	
	\chapter{ROS: Architecture et Concepts}
	
	\chapter{Point Cloud Library}

\end{appendix}

\bibliographystyle{plain}
\bibliography{biblio}

\end{document}